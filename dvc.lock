schema: '2.0'
stages:
  compose:
    cmd: python src/compose.py
    deps:
    - path: src/compose.py
      hash: md5
      md5: 734de3875c6f0a8e4f36d1d039730544
      size: 699
    - path: src/data_transformer.py
      hash: md5
      md5: 5e0d2c76aec3be8a435cc665206c123a
      size: 23956
    - path: src/datasets.py
      hash: md5
      md5: 591e8df16f7bc813dabbf76f5f40eb66
      size: 606
    - path: src/utils.py
      hash: md5
      md5: 9ab1831186b26fc602f4b406f4d6cd60
      size: 1043
    params:
      params.yaml:
        compose:
          dataset: lab_data
          output: data.pkl
        metadata:
          label_column: acc_gyro_event
          timestamp_column: acc_gyro_timestamp
          correct_labels:
          - 0
          - 1
          - 2
          - 4
          - 8
          timestamp_multiplier: 0.0001
          signal_columns:
            acc:
            - acc_x
            - acc_y
            - acc_z
            gyro:
            - gyro_x
            - gyro_y
            - gyro_z
          scalar_columns:
          - patient_id
          - measure_id
          - augmented
          datetime_column: packet_start_time
          patient_column: patient_id
          measure_column: measure_id
          augment_column: augmented
    outs:
    - path: data/data.pkl
      hash: md5
      md5: 2984ed34c838b39c92bb0653cd21d549
      size: 429301096
  prepare:
    cmd: python src/prepare.py
    deps:
    - path: data/data.pkl
      hash: md5
      md5: 2984ed34c838b39c92bb0653cd21d549
      size: 429301096
    - path: src/data_transformer.py
      hash: md5
      md5: 5e0d2c76aec3be8a435cc665206c123a
      size: 23956
    - path: src/prepare.py
      hash: md5
      md5: a5aa152a2fd1b8c7f2d12e06681afeb4
      size: 6483
    - path: src/utils.py
      hash: md5
      md5: 9ab1831186b26fc602f4b406f4d6cd60
      size: 1043
    params:
      params.yaml:
        metadata:
          label_column: acc_gyro_event
          timestamp_column: acc_gyro_timestamp
          correct_labels:
          - 0
          - 1
          - 2
          - 4
          - 8
          timestamp_multiplier: 0.0001
          signal_columns:
            acc:
            - acc_x
            - acc_y
            - acc_z
            gyro:
            - gyro_x
            - gyro_y
            - gyro_z
          scalar_columns:
          - patient_id
          - measure_id
          - augmented
          datetime_column: packet_start_time
          patient_column: patient_id
          measure_column: measure_id
          augment_column: augmented
        prepare:
          output: data_prepared.pkl
          window_size: 700
          window_step: 100
          random_seed: 42
          augment_percent: 100
          augment_params:
            sigma: 5
          augmenter: None
          partial_windows: false
          subsample: false
    outs:
    - path: data/data_prepared.pkl
      hash: md5
      md5: 457e30030e42049eb2800d6ac406b947
      size: 2414582692
  diagrams:
    cmd: python src/diagrams.py
    deps:
    - path: data/data_prepared.pkl
      hash: md5
      md5: 457e30030e42049eb2800d6ac406b947
      size: 2414582692
    - path: src/data_transformer.py
      hash: md5
      md5: 5e0d2c76aec3be8a435cc665206c123a
      size: 23956
    - path: src/diagrams.py
      hash: md5
      md5: e8c67287953c4fbe2586c1c8d70dfe34
      size: 4708
    - path: src/utils.py
      hash: md5
      md5: 9ab1831186b26fc602f4b406f4d6cd60
      size: 1043
    params:
      params.yaml:
        diagrams:
          output: diagrams.pkl
          restrict: 500
          columns:
            xy:
            - acc_x
            - acc_y
            xz:
            - acc_x
            - acc_z
            yz:
            - acc_y
            - acc_z
          params:
          - dim: 2
          - dim: 3
          - dim: 4
          - dim: 10
          - dim: 2
            kind: abs
          - dim: 10
            kind: abs
          - dim: 2
            kind: phi
          - dim: 10
            kind: phi
          - dim: 2
            kind: abs
            fil: star
          - dim: 2
            kind: phi
            fil: star
          - dim: 2
            step: 30
          - dim: 4
            step: 30
        metadata:
          label_column: acc_gyro_event
          timestamp_column: acc_gyro_timestamp
          correct_labels:
          - 0
          - 1
          - 2
          - 4
          - 8
          timestamp_multiplier: 0.0001
          signal_columns:
            acc:
            - acc_x
            - acc_y
            - acc_z
            gyro:
            - gyro_x
            - gyro_y
            - gyro_z
          scalar_columns:
          - patient_id
          - measure_id
          - augmented
          datetime_column: packet_start_time
          patient_column: patient_id
          measure_column: measure_id
          augment_column: augmented
    outs:
    - path: data/diagrams.pkl
      hash: md5
      md5: 6c0300e025fb8ed4587b60fe12bd8604
      size: 1127495516
  featurize:
    cmd: python src/featurize.py
    deps:
    - path: data/diagrams.pkl
      hash: md5
      md5: 6c0300e025fb8ed4587b60fe12bd8604
      size: 1127495516
    - path: src/data_transformer.py
      hash: md5
      md5: 5e0d2c76aec3be8a435cc665206c123a
      size: 23956
    - path: src/featurize.py
      hash: md5
      md5: 106d03f4ee9af7319c218b25a32ea092
      size: 3938
    - path: src/utils.py
      hash: md5
      md5: 9ab1831186b26fc602f4b406f4d6cd60
      size: 1043
    params:
      params.yaml:
        featurize:
          output: features.pkl
        metadata:
          label_column: acc_gyro_event
          timestamp_column: acc_gyro_timestamp
          correct_labels:
          - 0
          - 1
          - 2
          - 4
          - 8
          timestamp_multiplier: 0.0001
          signal_columns:
            acc:
            - acc_x
            - acc_y
            - acc_z
            gyro:
            - gyro_x
            - gyro_y
            - gyro_z
          scalar_columns:
          - patient_id
          - measure_id
          - augmented
          datetime_column: packet_start_time
          patient_column: patient_id
          measure_column: measure_id
          augment_column: augmented
    outs:
    - path: data/features.pkl
      hash: md5
      md5: c762faaa9e1359c8846d9c6b1177e5c5
      size: 6859276
  rfe_reduce:
    cmd: python src/rfe_reduce.py
    deps:
    - path: data/features.pkl
      hash: md5
      md5: d38ca8be6b0d05a7f3eaf8d7b677263f
      size: 41516
    - path: src/config.py
      hash: md5
      md5: 7235132b360eb345b9eb9f55679c622d
      size: 2075
    - path: src/data_transformer.py
      hash: md5
      md5: 5e0d2c76aec3be8a435cc665206c123a
      size: 23956
    - path: src/datasets.py
      hash: md5
      md5: 591e8df16f7bc813dabbf76f5f40eb66
      size: 606
    - path: src/rfe_reduce.py
      hash: md5
      md5: 483be50f86c14b6be40115ff6ffb41ec
      size: 3860
    - path: src/spotcheck.py
      hash: md5
      md5: b2002342276a0c406406556c9a7ea95e
      size: 11299
    - path: src/utils.py
      hash: md5
      md5: 9ab1831186b26fc602f4b406f4d6cd60
      size: 1043
    outs:
    - path: metrics/rfe_results.pkl
      hash: md5
      md5: 7818e9e54910b0e58917d128ab67db71
      size: 396895
  train_test_split:
    cmd: python src/train_test_split.py
    deps:
    - path: data/features.pkl
      hash: md5
      md5: c762faaa9e1359c8846d9c6b1177e5c5
      size: 6859276
    - path: src/train_test_split.py
      hash: md5
      md5: 5d14c1d130e8c323a9f37ac9b1127dd3
      size: 1896
    - path: src/utils.py
      hash: md5
      md5: 9ab1831186b26fc602f4b406f4d6cd60
      size: 1043
    params:
      params.yaml:
        metadata:
          label_column: acc_gyro_event
          timestamp_column: acc_gyro_timestamp
          correct_labels:
          - 0
          - 1
          - 2
          - 4
          - 8
          timestamp_multiplier: 0.0001
          signal_columns:
            acc:
            - acc_x
            - acc_y
            - acc_z
            gyro:
            - gyro_x
            - gyro_y
            - gyro_z
          scalar_columns:
          - patient_id
          - measure_id
          - augmented
          datetime_column: packet_start_time
          patient_column: patient_id
          measure_column: measure_id
          augment_column: augmented
        train_test_split:
          training_output: train_features.pkl
          test_output: test_features.pkl
          test_proportion: 0.2
    outs:
    - path: data/test_features.pkl
      hash: md5
      md5: 6c3dfc4fba55e7cd10f0974396865a4e
      size: 1383272
    - path: data/train_features.pkl
      hash: md5
      md5: 6c000ce90fd8e1eadf84b3b47b2f3602
      size: 5490274
